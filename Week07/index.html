<script>
  // 字符串转数字
  function StringToNumber(value) {
    if (typeof value !== 'string') return '不是字符串'

    if (value.length >= 16) {
      if (BigInt(value) > BigInt(9007199254740991)) {
        return value + '超出限制'
      }
      if (BigInt(value) <= BigInt(-9007199254740991)) {
        return value + '超出限制'
      }
    }
    // return Number(value)

    if (value.startsWith('0x') || value.startsWith('0X')) {
      return parseInt(value.substring(2), 16)
    }
    if (value.startsWith('0o')) {
      return parseInt(value.substring(2), 8)
    }
    if (value.startsWith('0b')) {
      return parseInt(value.substring(2), 2)
    }
    return parseFloat(value, 10)
  }
  // 数字转字符串
  function NumberToString(value, redis = undefined) {
    if (Number.isInteger(value) && !Number.isSafeInteger(value)) {
      return value + '超出限制'
    }
    return value.toString(redis)
  }
</script>
